## Spring Boot 学习总结

### 一、引言
在互联网时代，服务端开发需应对高效开发、灵活部署、安全保障等挑战。Spring Boot凭借简洁的配置、强大的功能和良好的生态系统，成为服务端开发首选。

### 二、Spring Boot基础
#### （一）Spring Boot简介
Spring Boot旨在简化Spring应用搭建与开发。其“约定大于配置”的理念，使开发者无需大量配置文件，通过`@SpringBootApplication`注解自动配置，提高开发效率。

#### （二）Spring Boot核心组件
核心组件包含自动配置与起步依赖。自动配置据项目依赖自动配置Spring及第三方库；起步依赖整合项目所需依赖，如`spring-boot-starter-web`整合了Spring MVC与Tomcat，简化Web开发配置。

### 三、Spring Boot与数据库
#### （一）Spring Data JPA
Spring Data JPA简化了数据库操作，通过接口继承`JpaRepository`实现增删改查。可定义实体类与数据库表映射，用方法命名规范简化查询，如`findByUsername`按用户名查用户。

#### （二）MyBatis集成
Spring Boot可集成MyBatis为持久层框架。通过添加MyBatis起步依赖，配置`mybatis`属性如`mapper-locations`，编写Mapper接口与映射文件实现复杂SQL操作。

### 四、Spring Boot与消息队列Kafka
#### （一）Kafka生产者
集成Kafka发送消息。配置`bootstrap.servers`等属性指定Kafka集群地址，用`KafkaTemplate`的`send`方法发送消息，如`kafkaTemplate.send("topicName", "key", "value");`。

#### （二）Kafka消费者
配置Kafka消费者，需设置`group.id`、`auto-offset-reset`等参数。用`@KafkaListener`注解定义监听器方法消费消息，如：
```java
@KafkaListener(topics = "topicName")
public void listen(String message) {
    System.out.println("Received message: " + message);
}
```

### 五、Spring Boot与前端技术集成
#### （一）前后端分离模式
前后端分离使前端页面与后端API服务器独立开发部署。配置静态资源路径，编写RESTful API实现数据交互，前端如Vue通过HTTP请求获取数据，后端用`@RestController`返回数据。

#### （二）模板引擎Thymeleaf
Thymeleaf在Spring Boot中使用简单，添加依赖后在HTML页面用标签数据绑定。如`<div th:text="${username}"></div>`，显示`username`变量值，支持遍历列表、条件判断等操作。

### 六、Spring Boot安全管理
#### （一）用户登录

用户登录方式可以使用多种方法。
- 基于内存，使用`InMemoryUserDetailsManager`保存用户信息；
- 密码加密，使用`BCryptPasswordEncoder`；
- 基于数据库和Redis登录，利用其高性能特点管理会话。

#### （二）权限控制
权限控制可以用多种方式实现。
- 自定义注解或方法拦截器进行权限校验；
- 基于角色，使用`@PreAuthorize`等注解控制方法访问权限；
- 将权限信息持久化存储在数据库等中间件中，实现动态权限管理。

### 七、Spring Boot高级功能
#### （一）AOP与接口调用统计
AOP分离横切关注点与业务逻辑，定义切点和通知实现方法拦截。结合内存或Redis统计接口调用次数，用Redis示例：
```java
@After("execution(* com.example.controller.*.*(..))")
public void countApiInvocation(JoinPoint joinPoint) {
    String methodName = joinPoint.getSignature().getName();
    redisTemplate.opsForValue().increment(methodName);
}
```
编写控制器方法展示统计结果。
#### （二）Redis缓存
Redis集成提升性能，减少数据库压力。用@Cacheable等注解实现缓存读写清除操作。Redis数据类型解决特定场景问题，如zset实现排行榜：
```java
redisTemplate.opsForZSet().add("rank", "user1", 100);
Set<String> top10 = redisTemplate.opsForZSet().reverseRange("rank", 0, 9);
```

### 八、Spring Boot部署
#### （一）本地部署
本地部署用`mvn spring-boot:run`命令启动应用，自动加载配置文件，初始化容器，启动Tomcat服务器。通过配置文件参数适应不同开发环境。
#### （二）Docker部署
Docker容器化技术实现快速部署迁移。编写Dockerfile打包应用为镜像，如：
```dockerfile
FROM openjdk:11-jre-slim
COPY target/myapp.jar app.jar
ENTRYPOINT ["java", "-jar", "/app.jar"]
```
构建镜像，运行容器并映射端口。

#### （三）docker-compose部署
docker-compose定义运行多容器Docker应用。编写`docker-compose.yml`文件定义容器配置，如：
```yaml
version: '3'
services:
  web:
    image: myapp:latest
    ports:
      - "8080:8080"
  db:
    image: mysql:5.7
    environment:
      MYSQL_ROOT_PASSWORD: root
```
用`docker-compose up`命令启动服务。

#### （四）K8s部署
K8s自动化部署、扩展、管理容器化应用。将应用打包为Docker镜像推镜像仓库，编写K8s资源定义文件如`Deployment`、`Service`定义部署访问方式，如：

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      app: myapp
  template:
    metadata:
      labels:
        app: myapp
    spec:
      containers:
      - name: myapp
        image: myapp:latest
        ports:
        - containerPort: 8080
yaml

apiVersion: v1
kind: Service
metadata:
  name: myapp-service
spec:
  selector:
    app: myapp
  ports:
    - protocol: TCP
      port: 80
      targetPort: 8080
  type: LoadBalancer
```
用`kubectl apply`命令将资源定义文件应用到K8s集群中，实现应用部署。

### 九、总结
Spring Boot是强大服务端开发框架，简化配置、丰富功能、良好生态系统使其广泛应用。本文总结其基础知识、数据库消息队列集成、前后端分离模板引擎使用、安全管理、高级功能及部署方式等内容。

实际项目中，Spring Boot可以帮助快速搭建应用，提高开发效率，集成中间件技术实现复杂功能高性能部署。随着云计算微服务架构发展，Spring Boot将发挥更重要作用，为开发者提供便捷高效开发体验。